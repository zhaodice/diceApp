安卓兼容计划（兼容至安卓5.1）：

注意：
mirai core的版本号必须达到2.5（修复了List.replaceAll 这个jdk8限定级api的问题）

将mirai console的
internal class JvmPluginClassLoader(
    val file: File,
    parent: ClassLoader?,
    val classLoaders: Collection<JvmPluginClassLoader>,
) : URLClassLoader(arrayOf(file.toURI().toURL()), parent)
修改为
internal class JvmPluginClassLoader(
    val file: File,
    parent: ClassLoader?,
    val classLoaders: Collection<JvmPluginClassLoader>,
) : BaseDexClassLoader(file.absolutePath,file.parentFile,null, parent) {
即可支持安卓系统
-------------
ClassLoader.registerAsParallelCapable()
改成
try {
    ClassLoader.registerAsParallelCapable()
}catch (e:Throwable){

}
-------------
override fun register(id: PermissionId, description: String, parent: Permission): P {
    val instance = createPermission(id, description, parent)
    val old = permissions.putIfAbsent(id, instance)
    if (old != null) throw PermissionRegistryConflictException(instance, old)
    return instance
}
改成
override fun register(id: PermissionId, description: String, parent: Permission): P {
    return createPermission(id, description, parent)
}
-------------
override fun registerCommand(command: Command, override: Boolean): Boolean {
    ...
}
改成
override fun registerCommand(command: Command, override: Boolean): Boolean {
    return true
}
-------------
override val pluginsPath: Path = MiraiConsole.rootPath.resolve("plugins").apply { mkdir() }
改成
override val pluginsPath: Path = Paths.get("/data/data/org.mirai.zhao.dice","app_plugins")
PS:org.mirai.zhao.dice是包名，请根据情况修改，之所以plugins要放到私有文件夹，是因为android的安全机制不允许载入sdcard的dex。

最后弄好兼容类：java.**

做完以上修改即可兼容安卓5.1